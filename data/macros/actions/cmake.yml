actions:

    # Perform cmake with the default options in a subdirectory
    - cmake: |
        mkdir serpentBuildDir && cd serpentBuildDir
        cmake %(cmakeOptions)

    # Build the cmake project
    - cmake_build: |
        ninja -v -j %(jobs) -C serpentBuildDir

    # Install results of the build to the destination directory
    - cmake_install: |
        DESTDIR="%(installdir)" ninja install -v -j %(jobs) -C serpentBuildDir

definitions:

    # Default cmake options as passed to cmake
    - cmakeOptions: |
        -G Ninja .. \
        -DCMAKE_CFLAGS="%(cflags)" \
        -DCMAKE_CXX_FLAGS="%(cxxflags)" \
        -DCMAKE_LD_FLAGS="%(ldflags)" \
        -DCMAKE_BUILD_TYPE="RelWithDebInfo" \
        -DCMAKE_INSTALL_PREFIX="%(prefix)" \
        -DCMAKE_AR="%(ar)" \
        -DCMAKE_NM="%(nm)" \
        -DCMAKE_RANLIB="%(ranlib)"
